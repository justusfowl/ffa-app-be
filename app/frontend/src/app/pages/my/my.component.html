<header  class="header">
    <div class="header-content small">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="text-container">
                    </div>
                </div> 
            </div> 
        </div> 
    </div> 
</header> 



<div class="container">
        <h1>
            myFFA
        </h1>
    
        <mat-tab-group>
    
            <mat-tab label="Profil" > 
                <div class="content profile" *ngIf="currentUser">
                    <div class="content-header">
                        <button mat-button matSuffix mat-stroked-button  (click)="updateUser()" >Speichern</button>    
                    </div>
                    
                    <form id="profileForm"  FormGroupDirective >

                        <div class="form-group">
                            <mat-form-field class="login-forms">
                                <input required matInput type="text" placeholder="eMail" class="form-control" readonly [(ngModel)]="currentUser.userName" [ngModelOptions]="{standalone: true}">
                            </mat-form-field>
                        </div>

                        <div class="form-group">
                            <mat-form-field class="login-forms">
                                <input required matInput type="text" placeholder="Name" class="form-control" [(ngModel)]="currentUser.name" [ngModelOptions]="{standalone: true}">
                                <mat-error  *ngIf="currentUser.name" >Bitte Namen eintragen.</mat-error>
                            </mat-form-field>
                        </div>

                        <div class="form-group">
                            <mat-form-field class="login-forms">
                                <input required matInput type="number" placeholder="Telefonnummer" class="form-control" [(ngModel)]="currentUser.patientMobilePhone" [ngModelOptions]="{standalone: true}">
                                <mat-error  *ngIf="currentUser.patientMobilePhone" >Bitte Telefonnummer eintragen.</mat-error>
                            </mat-form-field>
                        </div>

                        <div class="form-group">
                            <mat-form-field>
                                <input matInput placeholder="Geburtsdatum" [matDatepicker]="picker" [(ngModel)]="currentUser.birthdate" [ngModelOptions]="{standalone: true}" readonly class="form-control">
                                <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                                <mat-datepicker #picker></mat-datepicker>
                            </mat-form-field>
                        </div>

                        
                    </form>
                </div>
            </mat-tab>
            <mat-tab label="Termine" >
                <div class="appointments">
                        <div class="content-header ">
                            <button class="newBtn" mat-button matSuffix mat-stroked-button (click)="newTeleAppointment()" >
                                Neuer Video-Termin
                            </button>
        
                            <mat-slide-toggle [(ngModel)]="flagIncludePast" (ngModelChange)="getMyAppointments()" class="toggle-previous-app">vergangene anzeigen</mat-slide-toggle>
        
                        </div>
        
                        <div class="" *ngIf="!myAppointments" >
                                Sie haben noch keine Termine - klicken Sie auf das "+", um einen neuen Termin zu vereinbaren.
                        </div>
        
                        <div class="content appointments" *ngIf="myAppointments">
        
                            <mat-accordion>
                                <mat-expansion-panel *ngFor="let app of myAppointments; let i=index;" class="appointment-item" [class.removed]="app.inactive" [expanded]="i==0">
                                    <mat-expansion-panel-header>
                                        <mat-panel-title>
                                            {{app.appointmentObj.start  | date:'longDate':'de'}} {{app.appointmentObj.start  | date:'shortTime':'de'}}
                                        </mat-panel-title>
                                        <mat-panel-description>
                                            {{app.appointmentType.name}} 
                                            
                                            <span *ngIf="app.tele">(Video)</span>
                                            <mat-icon *ngIf="app.tele">videocam</mat-icon>
    
                                        </mat-panel-description>
                                    </mat-expansion-panel-header>
    
                                <div class="app-content">
                                                                                    
                                        <div class="form-group">
                                            <mat-form-field >
                                                <input required matInput type="text" placeholder="Arzt" class="form-control" [ngModel]="app.doc.userName" readonly>
                                            </mat-form-field>
                                        </div>
                                
                                        <div class="form-group">
                                            <mat-form-field >
                                                <textarea required matInput type="text" placeholder="Details" class="form-control" [ngModel]="app.appointmentNotes" readonly></textarea>
                                            </mat-form-field>
                                        </div>
    
                                        <div class="form-group" *ngIf="!app.inactive">
                                            Patienten-Code: {{app.tele.patientCode}}
                                        </div>
    
                                        <div class="info">
                                            Wir verwenden mit RED-Medical einen zertifizierten Anbieter für Videosprechstunden. Näheres erfahren Sie <a href="https://www.redmedical.de/" target="_blank" >hier</a>.
                                        </div>
    
                                        <div>
                                            <button *ngIf="app.inactive" class="saveBtn" mat-button matSuffix mat-stroked-button color="warn">
                                                gelöscht
                                            </button>
    
                                            <button *ngIf="!app.inactive" [disabled]="!canDelete(app)" class="saveBtn" mat-button matSuffix mat-stroked-button color="warn" (click)="removeTeleAppointment(app)" >
                                                Termin löschen
                                            </button>
    
                                            <button class="saveBtn floatright" [disabled]="app.inactive" mat-button matSuffix mat-stroked-button (click)="openTeleAppointment(app)" *ngIf="app.tele">
                                                Beratung starten
                                            </button>
                    
                                        </div>
    
                                </div>
    
                                </mat-expansion-panel>
                            </mat-accordion>
        
                        </div>
                </div>
                

            </mat-tab>
            <mat-tab label="Rezepte" *ngIf="false">

            </mat-tab>
            <mat-tab label="Einstellungen" *ngIf="false" >

                <mat-accordion>
                    <mat-expansion-panel >
                        <mat-expansion-panel-header>
                            <mat-panel-title>
                                Benachrichtigungen
                            </mat-panel-title>
                            <mat-panel-description>
                                
                                <mat-icon>notification_important</mat-icon>

                            </mat-panel-description>
                        </mat-expansion-panel-header>

                        <div class="settings-content">

                        </div>

                    </mat-expansion-panel>

                    <mat-expansion-panel>
                            <mat-expansion-panel-header>
                                <mat-panel-title>
                                    Benachrichtigungen
                                </mat-panel-title>
                                <mat-panel-description>
                                    
                                    <mat-icon>notification_important</mat-icon>

                                </mat-panel-description>
                            </mat-expansion-panel-header>

                        <div class="settings-content">

                        </div>

                    </mat-expansion-panel>

                </mat-accordion>

            </mat-tab>

    </mat-tab-group>

</div>